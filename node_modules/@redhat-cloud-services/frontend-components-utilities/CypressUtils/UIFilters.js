"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.removeAllChips = exports.filter = exports.hasChip = exports.urlParamConvert = exports.applyFilters = void 0;
var lodash_1 = __importDefault(require("lodash"));
var selectors_1 = require("./selectors");
var CustomCommands_1 = require("./CustomCommands");
(0, CustomCommands_1.findElementByOuiaId)();
function applyFilters(filters, filtersConf) {
    for (var _i = 0, _a = Object.entries(filters); _i < _a.length; _i++) {
        var _b = _a[_i], key = _b[0], value = _b[1];
        var item = filtersConf[key];
        cy.get('div.ins-c-primary-toolbar__filter').find('button[class=pf-c-dropdown__toggle]').click();
        cy.get(selectors_1.FILTERS_DROPDOWN).contains(item.selectorText).click();
        if (item.type === 'input') {
            cy.get('input.ins-c-conditional-filter').type(value);
        }
        else if (item.type === 'checkbox') {
            cy.get(selectors_1.FILTER_TOGGLE).click();
            value.forEach(function (it) {
                cy.get('ul[class=pf-c-select__menu]').find('label').contains(it).parent().find('input[type=checkbox]').check();
            });
            cy.get(selectors_1.FILTER_TOGGLE).click();
        }
        else if (item.type == 'radio') {
            cy.get(selectors_1.FILTER_TOGGLE).click();
            cy.get('ul[class=pf-c-select__menu]').find('label').contains(value).parent().find('input[type=radio]').check();
        }
        else {
            throw "".concat(item.type, " not recognized");
        }
    }
}
exports.applyFilters = applyFilters;
function urlParamConvert(key, value, filters) {
    var filterCategory = lodash_1.default.find(lodash_1.default.values(filters), function (it) { return it.urlParam === key; });
    var title;
    var label;
    if (filterCategory === undefined) {
        title = lodash_1.default.capitalize(key);
        label = value;
    }
    else {
        title = lodash_1.default.capitalize(filterCategory.title);
        label = lodash_1.default.find(filterCategory.values, function (it) { return it.value === value; }).label.props.children;
    }
    return [title, label];
}
exports.urlParamConvert = urlParamConvert;
function hasChip(name, value) {
    cy.contains(selectors_1.CHIP_GROUP, name).parent().contains(selectors_1.CHIP, value);
}
exports.hasChip = hasChip;
function filter(conf, data, filters) {
    var filteredData = data;
    var _loop_1 = function (key, value) {
        filteredData = lodash_1.default.filter(filteredData, function (it) { return conf[key].filterFunc(it, value); });
        if (filteredData.length === 0) {
            return "break";
        }
    };
    for (var _i = 0, _a = Object.entries(filters); _i < _a.length; _i++) {
        var _b = _a[_i], key = _b[0], value = _b[1];
        var state_1 = _loop_1(key, value);
        if (state_1 === "break")
            break;
    }
    return filteredData;
}
exports.filter = filter;
function removeAllChips() {
    cy.get(selectors_1.CHIP_GROUP)
        .find(selectors_1.CHIP)
        .ouiaId('close', 'button')
        .each(function () {
        cy.get(selectors_1.CHIP_GROUP).find(selectors_1.CHIP).ouiaId('close', 'button').eq(0).click();
    });
}
exports.removeAllChips = removeAllChips;
//# sourceMappingURL=UIFilters.js.map